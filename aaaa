// src/api/occupancy.service.js

export const getCurrentOccupancy = async (partitionNames) => {
  try {
    return partitionNames.map((name) => ({
      partitionName: name,
      occupancy: Math.floor(Math.random() * 100),
    }));
  } catch (error) {
    console.error('Error fetching occupancy data:', error);
    throw error;
  }
};


...
import React from 'react';
import {
  Table, TableHead, TableRow, TableCell, TableBody,
} from '@mui/material';

const DataTable = ({ data }) => (
  <Table size="small">
    <TableHead>
      <TableRow>
        <TableCell>Name</TableCell>
        <TableCell>Type</TableCell>
        <TableCell>Location</TableCell>
        <TableCell>Time</TableCell>
      </TableRow>
    </TableHead>
    <TableBody>
      {data.map((row, idx) => (
        <TableRow key={idx}>
          <TableCell>{row.ObjectName1}</TableCell>
          <TableCell>{row.PersonnelType}</TableCell>
          <TableCell>{row.PartitionName2}</TableCell>
          <TableCell>{new Date(row.LocaleMessageTime).toLocaleTimeString()}</TableCell>
        </TableRow>
      ))}
    </TableBody>
  </Table>
);

export default DataTable;

...


....


import { useState, useEffect } from 'react';
import { getCurrentOccupancy } from '../api/occupancy.service';

export const useLiveOccupancy = (partitionNames) => {
  const [data, setData] = useState([]);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    let isMounted = true;
    const fetchData = async () => {
      try {
        const result = await getCurrentOccupancy(partitionNames);
        if (isMounted) setData(result);
      } catch (error) {
        console.error('Error fetching occupancy:', error);
      } finally {
        if (isMounted) setLoading(false);
      }
    };

    fetchData();
    const intervalId = setInterval(fetchData, 5000);
    return () => {
      isMounted = false;
      clearInterval(intervalId);
    };
  }, [partitionNames]);

  return { data, loading };
};

.....

import React from 'react';
import { BrowserRouter as Router, Routes, Route } from 'react-router-dom';
import Dashboard from './pages/Dashboard';
import History from './pages/History';

const App = () => (
  <Router>
    <Routes>
      <Route path="/" element={<Dashboard />} />
      <Route path="/history/:partition" element={<History />} />
    </Routes>
  </Router>
);

export default App;