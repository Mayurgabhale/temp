function updateDowntimeCount(deviceIp, history, deviceCategory) {
    const safeIp = sanitizeId(deviceIp);
    const downtimeCount = countValidDowntimes(history, deviceCategory);
    const remarkElement = document.getElementById(`remark-${safeIp}`);
    const downtimeElement = document.getElementById(`downtime-count-${safeIp}`);

    if (downtimeElement) downtimeElement.innerText = downtimeCount;

    const lastStatus = history.length > 0 ? history[history.length - 1].status : "Unknown";

    if (remarkElement) {
        if (lastStatus === "Offline") {
            remarkElement.innerText = downtimeCount >= 15
                ? "Device is Offline, needs repair."
                : "Device is Offline.";
        } else if (lastStatus === "Online") {
            if (downtimeCount >= 15) {
                remarkElement.innerText = "Device is Online, needs repair.";
            } else if (downtimeCount > 0) {
                remarkElement.innerText = `Device is Online, it had ${downtimeCount} downtime occurrences.`;
            } else {
                remarkElement.innerText = "Device is Online.";
            }
        } else {
            remarkElement.innerText = "Device status unknown.";
        }
    }
}





function updateRemarks(deviceIp, history, deviceCategory) {
    const safeIp = sanitizeId(deviceIp);
    const downtimeCount = countValidDowntimes(history, deviceCategory);