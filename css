function formatDuration(seconds) {
    const minutes = Math.floor(seconds / 60);
    const secs = Math.floor(seconds % 60);
    return `${minutes}m ${secs}s`;
}





let lastOfflineTimestamp = null;
let srNo = 1;

for (let i = 0; i < history.length; i++) {
    const entry = history[i];
    const entryDate = new Date(entry.timestamp);
    const formattedDate = entryDate.toLocaleDateString();
    const formattedTime = entryDate.toLocaleTimeString();
    const formattedDay = entryDate.toLocaleString('en-US', { weekday: 'long' });

    if (entry.status === "Offline") {
        lastOfflineTimestamp = entry.timestamp;
    } else if (entry.status === "Online" && lastOfflineTimestamp) {
        const offlineTime = new Date(lastOfflineTimestamp).getTime();
        const onlineTime = new Date(entry.timestamp).getTime();
        const durationSec = (onlineTime - offlineTime) / 1000;

        if (durationSec >= 300) {
            const downtimeDuration = formatDuration(durationSec);
            tableHTML += `
                <tr>
                    <td>${srNo++}</td>
                    <td>${formattedDate}</td>
                    <td>${formattedDay}</td>
                    <td>${formattedTime}</td>
                    <td style="color: green;">${entry.status}</td>
                    <td>${downtimeDuration}</td>
                </tr>
            `;
        }

        lastOfflineTimestamp = null; // reset after Online
    }
}