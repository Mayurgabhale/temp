// src/utils/floorLookup.js
import doorMap from './doorMap';

// Zone to floor mapping
const zoneFloorMap = {
  "Red Zone": "Podium Floor",
  "Yellow Zone": "Podium Floor",
  "Green Zone": "Podium Floor",
  "Orange Zone": "Podium Floor",
  "Reception Area": "Podium Floor",
  "2nd Floor, Pune": "2nd Floor",
  "Tower B": "Tower B",
  "Kuala Lumpur": "Kuala Lumpur",
  "6th Floor": "6th Floor",
  "7th Floor": "7th Floor",
  "Tokyo": "Tokyo",
  "Taguig": "Taguig",
  "Out of office": null
};

/**
 * Convert door event to human-readable floor name
 */
export function lookupFloor(partition, door, direction) {
  const key = `${partition}_${door}___${direction}`;
  
  // 1. Try direct mapping
  const zone = doorMap[key];
  if (zone) {
    return zoneFloorMap[zone] || zone;
  }
  
  // 2. Try partial match for door name
  for (const [pattern, zone] of Object.entries(doorMap)) {
    if (key.includes(pattern.split('___')[0])) {
      return zoneFloorMap[zone] || zone;
    }
  }
  
  // 3. Fallback to unmapped
  return "Unmapped Area";
}