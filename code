const typeSel     = document.getElementById('device-type').value.toUpperCase();
const remarkSel   = document.getElementById('remark-filter').value.toUpperCase();
const citySel     = document.getElementById('cityFilter')?.value.toUpperCase() || "ALL";
const searchTxt   = document.getElementById('search-input').value.toUpperCase();

document.querySelectorAll('#device-table tbody tr').forEach(r => {
  const ip     = r.cells[1].textContent.toUpperCase();
  const name   = r.cells[2].textContent.toUpperCase();
  const type   = r.cells[3].textContent.toUpperCase();
  const city   = r.cells[4].textContent.toUpperCase();
  const remark = r.cells[9]?.textContent.toUpperCase(); // ✅ Corrected index to 9

  const matchesType   = (typeSel === 'ALL' || type === typeSel);
  const matchesRemark = (remarkSel === 'ALL' || remark.includes(remarkSel)); // ✅ Case-insensitive match
  const matchesCity   = (citySel === 'ALL' || city === citySel);
  const matchesSearch = (ip.includes(searchTxt) || name.includes(searchTxt));

  r.style.display = matchesType && matchesRemark && matchesCity && matchesSearch ? '' : 'none';
});