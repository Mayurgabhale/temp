const rows = useMemo(() => {
  if (!summary || !summary.partitions) return [];

  const filtered = Object.entries(summary.partitions)
    .filter(([k]) => !filterCode || k.startsWith(filterCode + '.'));

  // If no data matches the filter, we return nothing.
  if (filtered.length === 0) return [];

  return filtered.map(([k, v]) => {
    const [code, site] = k.split('.');
    const employee = v.Employee ?? v.EmployeeCount ?? 0;
    const contractor = v.Contractor ?? v.ContractorCount ?? 0;
    const total = employee + contractor;
    return {
      country: codeToCountry[code] || code,
      site,
      employee,
      contractor,
      total
    };
  });
}, [summary, filterCode]);