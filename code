""const detailRows = useMemo(() => { if (!data || !pickedDate) return [];

const dateStr = format(pickedDate, 'yyyy-MM-dd'); const filteredDetails = data.details .filter(r => format(new Date(r.LocaleMessageTime), 'yyyy-MM-dd') === dateStr) .filter(r => { if (!decodedPartition) return true; const feCode = apacReverseKey[r.PartitionName2]; return feCode === decodedPartition; }) .filter(r => r.Direction === 'InDirection') .reduce( (unique, row) => { const keyGUID = ${row.PersonGUID}-${row.PersonnelType}; if (!unique._seen.has(keyGUID)) { unique._seen.add(keyGUID); unique.rows.push(row); } return unique; }, { _seen: new Set(), rows: [] } ).rows;

return filteredDetails; }, [data, pickedDate, decodedPartition]);

