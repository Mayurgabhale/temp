useEffect(() => {
  setLoading(true);
  fetchHistory(decodedPartition)
    .then(json => {
      console.log("Fetched data:", json);
      setData(json);
    })
    .finally(() => setLoading(false));
}, [decodedPartition]);







const summaryEntry = useMemo(() => {
  if (!data || !pickedDate) return null;

  const dateStr = format(pickedDate, 'yyyy-MM-dd');

  // Add fallback: match even partial date strings (in case format mismatches)
  const match = data.summaryByDate.find(r =>
    r.date.startsWith(dateStr)
  );

  return match || null;
}, [data, pickedDate]);



